# 🔧 常見問題解決指南

## ❌ ERR_FILE_NOT_FOUND 錯誤

### 問題描述
直接雙擊 HTML 檔案時，出現以下錯誤：
```
無法存取你的檔案
檔案可能已遭到移動、編輯或刪除。
ERR_FILE_NOT_FOUND
```

### 原因
使用 `file://` 協議開啟 HTML 檔案時，瀏覽器會阻擋 CORS（跨來源資源共享）請求，導致無法連接到後端 API。

### 解決方案

#### ✅ 方法 1：使用一鍵啟動腳本（推薦）
```
雙擊：START_ALL_SERVERS.bat
```
這會自動：
1. 啟動後端 API (port 3000)
2. 啟動前端伺服器 (port 8080)
3. 在瀏覽器開啟測試頁面

#### ✅ 方法 2：分別啟動伺服器
1. 啟動後端：
   ```
   雙擊：START_LEADERBOARD_NEW_WINDOW.bat
   ```

2. 啟動前端：
   ```
   雙擊：START_FRONTEND_SERVER.bat
   ```

3. 瀏覽器開啟：
   ```
   http://localhost:8080/leaderboard-test.html
   ```

#### ✅ 方法 3：手動啟動
```bash
# 終端機 1：啟動後端
cd D:\網頁\website\backend\nodejs
npm start

# 終端機 2：啟動前端
cd D:\網頁\website\frontend
python -m http.server 8080

# 瀏覽器開啟
http://localhost:8080/leaderboard-test.html
```

---

## ❌ 後端連接失敗

### 問題描述
測試頁面顯示「後端狀態：未連接」或「連接失敗」

### 檢查清單

#### 1. 確認後端是否啟動
```bash
# 檢查 3000 端口是否在監聽
netstat -ano | findstr :3000
```

應該看到：
```
TCP    0.0.0.0:3000    0.0.0.0:0    LISTENING    1234
```

#### 2. 確認 MySQL 服務運行
```bash
# 測試 MySQL 連接
mysql -u root -p
```

#### 3. 檢查資料庫是否存在
```sql
SHOW DATABASES;
USE leaderboard_db;
SHOW TABLES;
```

### 解決方案

#### 如果後端未啟動
```
雙擊：START_LEADERBOARD_NEW_WINDOW.bat
```

#### 如果 MySQL 未運行
1. 開啟「服務」應用程式
2. 找到「MySQL」服務
3. 點擊「啟動」

#### 如果資料庫不存在
```bash
# 重新建立資料庫
mysql -u root
CREATE DATABASE leaderboard_db;
exit

# 匯入架構
mysql -u root leaderboard_db < D:/網頁/website/backend/database/schema-simplified.sql
```

---

## ❌ Port 已被佔用

### 問題描述
啟動時出現 `EADDRINUSE` 錯誤

### 解決方案

#### 釋放 3000 端口（後端）
```bash
# 查找佔用 3000 端口的進程
netstat -ano | findstr :3000

# 殺掉進程（將 PID 替換為實際的進程 ID）
taskkill /F /PID <PID>
```

#### 釋放 8080 端口（前端）
```bash
# 查找佔用 8080 端口的進程
netstat -ano | findstr :8080

# 殺掉進程
taskkill /F /PID <PID>
```

---

## ❌ 提交分數失敗：User not found

### 問題描述
```json
{
  "success": false,
  "error": "User not found"
}
```

### 原因
資料庫中不存在該用戶 ID

### 解決方案

#### 方法 1：使用 SQL 快速指令
```
雙擊：backend/SQL_快速指令.bat
```

然後執行：
```sql
-- 查看現有用戶
SELECT * FROM users;

-- 新增用戶（例如 user_id = 10）
INSERT INTO users (id, username) VALUES (10, '測試用戶');
```

#### 方法 2：手動開啟 MySQL
```bash
mysql -u root leaderboard_db
```

```sql
INSERT INTO users (id, username) VALUES (你的用戶ID, '用戶名稱');
```

---

## ❌ MySQL 連接錯誤

### 問題描述
後端啟動時顯示「⚠️ MySQL connection failed」

### 檢查清單

#### 1. 檢查 .env 配置
檔案位置：`backend/nodejs/.env`

```env
MYSQL_HOST=localhost
MYSQL_PORT=3306
MYSQL_DATABASE=leaderboard_db
MYSQL_USER=root
MYSQL_PASSWORD=你的密碼
```

#### 2. 測試 MySQL 連接
```bash
mysql -u root -p
```

輸入密碼後應該能正常登入。

#### 3. 確認資料庫存在
```sql
SHOW DATABASES;
```

應該看到 `leaderboard_db`。

### 解決方案

#### 如果密碼錯誤
修改 `backend/nodejs/.env` 檔案中的 `MYSQL_PASSWORD`

#### 如果資料庫不存在
```bash
mysql -u root -p
CREATE DATABASE leaderboard_db;
exit

mysql -u root leaderboard_db < D:/網頁/website/backend/database/schema-simplified.sql
```

---

## ❌ npm 相關錯誤

### 問題描述
啟動後端時出現 npm 錯誤

### 解決方案

#### 重新安裝依賴
```bash
cd D:\網頁\website\backend\nodejs
rm -rf node_modules
rm package-lock.json
npm install
```

#### 清除 npm 快取
```bash
npm cache clean --force
npm install
```

---

## 📚 相關資源

- [測試流程指南](./測試流程指南.md) - 完整測試步驟
- [SQL 基礎教學](./backend/SQL_基礎教學.md) - SQL 入門
- [常用查詢](./backend/database/常用查詢.sql) - SQL 查詢範例

---

## 💡 需要更多幫助？

如果以上方法都無法解決問題：

1. 檢查後端終端機的錯誤訊息
2. 檢查瀏覽器的 Console（F12）
3. 在 GitHub 開 Issue：https://github.com/GALLACE1111/mywebsite/issues

---

更新日期：2025-10-29
