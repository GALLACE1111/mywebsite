# æ„›å¿ƒäº’å‹•éŠæˆ² - é–‹ç™¼æŒ‡å— ğŸš€

**æœ€å¾Œæ›´æ–°**: 2025-11-02
**ç‰ˆæœ¬**: Vue 3 + Nuxt 3 å®Œæ•´ç‰ˆ

---

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```
D:\ç¶²é \website\
â”œâ”€â”€ frontend-nuxt/          # âœ… æ–°å‰ç«¯ (Nuxt 3 + Vue 3)
â”‚   â”œâ”€â”€ components/         # Vue çµ„ä»¶
â”‚   â”œâ”€â”€ pages/              # è·¯ç”±é é¢
â”‚   â”œâ”€â”€ stores/             # Pinia ç‹€æ…‹ç®¡ç†
â”‚   â”œâ”€â”€ composables/        # å¯çµ„åˆå‡½æ•¸
â”‚   â”œâ”€â”€ types/              # TypeScript é¡å‹
â”‚   â”œâ”€â”€ public/             # éœæ…‹è³‡æº
â”‚   â”œâ”€â”€ nuxt.config.ts      # Nuxt é…ç½®
â”‚   â”œâ”€â”€ package.json        # ä¾è³´ç®¡ç†
â”‚   â””â”€â”€ .env                # ç’°å¢ƒé…ç½®
â”‚
â”œâ”€â”€ backend/
â”‚   â””â”€â”€ nodejs/             # âœ… Express + Firestore å¾Œç«¯
â”‚       â”œâ”€â”€ routes/         # API è·¯ç”±
â”‚       â”œâ”€â”€ config/         # é…ç½®æ–‡ä»¶
â”‚       â”œâ”€â”€ utils/          # å·¥å…·å‡½æ•¸
â”‚       â”œâ”€â”€ server.js       # å…¥å£æ–‡ä»¶
â”‚       â””â”€â”€ .env            # ç’°å¢ƒè®Šé‡
â”‚
â”œâ”€â”€ frontend-old/           # ğŸ—„ï¸ èˆŠå‰ç«¯å‚™ä»½ï¼ˆå·²åœç”¨ï¼‰
â””â”€â”€ å•Ÿå‹•é–‹ç™¼ç’°å¢ƒ.bat        # ä¸€éµå•Ÿå‹•è…³æœ¬
```

---

## ğŸš€ å¿«é€Ÿé–‹å§‹

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨ä¸€éµå•Ÿå‹•è…³æœ¬ï¼ˆæ¨è–¦ï¼‰

ç›´æ¥é›™æ“Š `å•Ÿå‹•é–‹ç™¼ç’°å¢ƒ.bat`ï¼Œæœƒè‡ªå‹•å•Ÿå‹•ï¼š
- å¾Œç«¯ API æœå‹™å™¨ï¼š`http://localhost:3000/api`
- å‰ç«¯é–‹ç™¼æœå‹™å™¨ï¼š`http://localhost:3001`

### æ–¹æ³•äºŒï¼šæ‰‹å‹•å•Ÿå‹•

#### 1. å•Ÿå‹•å¾Œç«¯ API

```bash
# é€²å…¥å¾Œç«¯ç›®éŒ„
cd D:\ç¶²é \website\backend\nodejs

# å•Ÿå‹•æœå‹™å™¨
node server.js
```

è¨ªå• `http://localhost:3000/api` æŸ¥çœ‹ API è³‡è¨Šã€‚

#### 2. å•Ÿå‹•å‰ç«¯ï¼ˆæ–°çª—å£ï¼‰

```bash
# é€²å…¥å‰ç«¯ç›®éŒ„
cd D:\ç¶²é \website\frontend-nuxt

# å®‰è£ä¾è³´ï¼ˆé¦–æ¬¡é‹è¡Œï¼‰
npm install

# å•Ÿå‹•é–‹ç™¼æœå‹™å™¨
npm run dev
```

è¨ªå• `http://localhost:3001` é–‹å§‹éŠæˆ²ã€‚

---

## ğŸ”§ é–‹ç™¼é…ç½®

### å‰ç«¯é…ç½®

**æ–‡ä»¶**: `frontend-nuxt/.env`

```env
# API å¾Œç«¯åœ°å€
NUXT_PUBLIC_API_BASE=http://localhost:3000/api

# Firebase å°ˆæ¡ˆ
NUXT_PUBLIC_FIREBASE_PROJECT_ID=side-project-663de

# å‰ç«¯ç«¯å£ï¼ˆé¿å…èˆ‡å¾Œç«¯è¡çªï¼‰
PORT=3001
```

### å¾Œç«¯é…ç½®

**æ–‡ä»¶**: `backend/nodejs/.env`

```env
# æœå‹™å™¨ç«¯å£
PORT=3000

# CORS è¨­å®š
CORS_ORIGIN=*

# Firebase æ†‘è­‰
FIREBASE_PROJECT_ID=side-project-663de
FIREBASE_PRIVATE_KEY="..."
FIREBASE_CLIENT_EMAIL="..."
```

---

## ğŸ“Š æŠ€è¡“æ£§

### å‰ç«¯

| æŠ€è¡“ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| Nuxt.js | 3.x | å…¨æ£§ Vue æ¡†æ¶ |
| Vue.js | 3.x | å‰ç«¯æ¡†æ¶ |
| TypeScript | 5.x | é¡å‹å®‰å…¨ |
| Pinia | 2.x | ç‹€æ…‹ç®¡ç† |
| Matter.js | 0.19.x | ç‰©ç†å¼•æ“ |
| Vite | 5.x | æ§‹å»ºå·¥å…· |

### å¾Œç«¯

| æŠ€è¡“ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| Node.js | 18+ | é‹è¡Œç’°å¢ƒ |
| Express.js | 4.x | Web æ¡†æ¶ |
| Firebase Admin | 12.x | Firestore æ•¸æ“šåº« |
| Redis | å¯é¸ | ç·©å­˜ç³»çµ± |

---

## ğŸ® åŠŸèƒ½æ¸…å–®

### æ ¸å¿ƒéŠæˆ²åŠŸèƒ½ âœ…
- â¤ï¸ æ„›å¿ƒæ”¶é›†ç³»çµ±
- ğŸ† å…¨çƒæ’è¡Œæ¦œ
- ğŸ’¾ åˆ†æ•¸æäº¤
- ğŸ”Š éŸ³æ•ˆ/éŸ³æ¨‚æ§åˆ¶

### é€²éšåŠŸèƒ½ âœ…
- ğŸ‘¤ å€‹äººè³‡æ–™ï¼ˆé ­åƒ + ç”¨æˆ¶å + ç¨±è™Ÿï¼‰
- ğŸŒŸ è¨±é¡˜æ± ï¼ˆé›²ç«¯åŒæ­¥ï¼‰
- â° å°ˆæ³¨é¬§é˜ï¼ˆç•ªèŒ„é˜ï¼‰
- âš™ï¸ æ„è¦‹å›é¥‹ï¼ˆé›²ç«¯åŒæ­¥ï¼‰
- ğŸŒ™ æœˆçƒä¸–ç•Œæ¢ç´¢
- âš”ï¸ Boss æˆ°é¬¥ç³»çµ±

### ç³»çµ±åŠŸèƒ½ âœ…
- ğŸ“± éŸ¿æ‡‰å¼è¨­è¨ˆ
- ğŸ¨ ç²¾ç¾å‹•ç•«
- ğŸ’¾ æ•¸æ“šæŒä¹…åŒ–
- ğŸ” å®Œæ•´ SEO å„ªåŒ–

---

## ğŸ—„ï¸ API ç«¯é»

### æ’è¡Œæ¦œ API

```
GET    /api/leaderboard              # ç²å–æ’è¡Œæ¦œ
POST   /api/leaderboard/submit       # æäº¤åˆ†æ•¸
GET    /api/leaderboard/my-rank/:id  # å€‹äººæ’å
PUT    /api/leaderboard/username     # æ›´æ–°ç”¨æˆ¶å
```

### è¨±é¡˜æ±  API â­

```
GET    /api/wishes                   # ç²å–è¨±é¡˜åˆ—è¡¨
POST   /api/wishes                   # æäº¤è¨±é¡˜
POST   /api/wishes/:id/like          # é»è®š/å–æ¶ˆé»è®š
GET    /api/wishes/my/:playerId      # æˆ‘çš„è¨±é¡˜æ­·å²
DELETE /api/wishes/:id               # åˆªé™¤è¨±é¡˜
```

### æ„è¦‹å›é¥‹ API â­

```
POST   /api/feedback                 # æäº¤å›é¥‹
GET    /api/feedback/my/:playerId    # æˆ‘çš„å›é¥‹æ­·å²
GET    /api/feedback                 # æ‰€æœ‰å›é¥‹ï¼ˆç®¡ç†å“¡ï¼‰
PUT    /api/feedback/:id/status      # æ›´æ–°ç‹€æ…‹ï¼ˆç®¡ç†å“¡ï¼‰
GET    /api/feedback/stats           # å›é¥‹çµ±è¨ˆï¼ˆç®¡ç†å“¡ï¼‰
```

### ç›£æ§ API

```
GET    /api/monitoring/stats         # ç³»çµ±çµ±è¨ˆ
GET    /api/monitoring/firestore     # Firestore ç‹€æ…‹
GET    /api/monitoring/cache         # ç·©å­˜ç‹€æ…‹
```

---

## ğŸ“¦ é–‹ç™¼è…³æœ¬

### å‰ç«¯è…³æœ¬ (frontend-nuxt)

```json
{
  "dev": "nuxt dev",              // é–‹ç™¼æ¨¡å¼
  "build": "nuxt build",          // ç”Ÿç”¢æ§‹å»º
  "generate": "nuxt generate",    // éœæ…‹ç”Ÿæˆ
  "preview": "nuxt preview",      // é è¦½ç”Ÿç”¢ç‰ˆæœ¬
  "postinstall": "nuxt prepare"   // æº–å‚™ TypeScript
}
```

### å¾Œç«¯è…³æœ¬ (backend/nodejs)

```bash
node server.js                    # å•Ÿå‹•æœå‹™å™¨
npm run dev                       # é–‹ç™¼æ¨¡å¼ï¼ˆå¦‚æœ‰ï¼‰
```

---

## ğŸ› å¸¸è¦‹å•é¡Œ

### Q1: å‰ç«¯ç„¡æ³•é€£æ¥å¾Œç«¯ï¼Ÿ

**æª¢æŸ¥**:
1. å¾Œç«¯æ˜¯å¦åœ¨ `http://localhost:3000` é‹è¡Œï¼Ÿ
2. `.env` ä¸­çš„ `NUXT_PUBLIC_API_BASE` æ˜¯å¦æ­£ç¢ºï¼Ÿ
3. CORS æ˜¯å¦é…ç½®æ­£ç¢ºï¼Ÿ

**è§£æ±º**:
```bash
# æª¢æŸ¥å¾Œç«¯
curl http://localhost:3000/api

# æª¢æŸ¥å‰ç«¯é…ç½®
cat frontend-nuxt/.env
```

### Q2: ç«¯å£è¡çªï¼Ÿ

**ç—‡ç‹€**: `Error: Port 3000 is already in use`

**è§£æ±º**:
1. ä¿®æ”¹ `frontend-nuxt/.env` çš„ `PORT=3001`
2. æˆ–è€…é—œé–‰ä½”ç”¨ç«¯å£çš„ç¨‹åº

### Q3: npm install å¤±æ•—ï¼Ÿ

**è§£æ±º**:
```bash
# æ¸…é™¤ç·©å­˜
npm cache clean --force

# åˆªé™¤ node_modules
rm -rf node_modules package-lock.json

# é‡æ–°å®‰è£
npm install
```

### Q4: Firestore é€£æ¥å¤±æ•—ï¼Ÿ

**æª¢æŸ¥**:
1. Firebase æ†‘è­‰æ˜¯å¦æ­£ç¢ºé…ç½®åœ¨ `.env`ï¼Ÿ
2. ç¶²çµ¡é€£æ¥æ˜¯å¦æ­£å¸¸ï¼Ÿ
3. Firestore è¦å‰‡æ˜¯å¦å…è¨±è¨ªå•ï¼Ÿ

---

## ğŸ“š ç›¸é—œæ–‡æª”

- [MIGRATION_COMPLETE.md](./MIGRATION_COMPLETE.md) - Phase 1 é·ç§»å ±å‘Š
- [PHASE2_MIGRATION_COMPLETE.md](./PHASE2_MIGRATION_COMPLETE.md) - Phase 2 é·ç§»å ±å‘Š
- [SEO_API_INTEGRATION_COMPLETE.md](./SEO_API_INTEGRATION_COMPLETE.md) - SEO & API æ•´åˆå ±å‘Š
- [é·ç§»å®Œæˆæ‘˜è¦.md](./é·ç§»å®Œæˆæ‘˜è¦.md) - å¿«é€Ÿæ‘˜è¦

---

## ğŸ¯ é–‹ç™¼æµç¨‹

### æ—¥å¸¸é–‹ç™¼

1. **å•Ÿå‹•é–‹ç™¼ç’°å¢ƒ**
   ```bash
   # é›™æ“Šå•Ÿå‹•è…³æœ¬
   å•Ÿå‹•é–‹ç™¼ç’°å¢ƒ.bat
   ```

2. **ä¿®æ”¹ä»£ç¢¼**
   - å‰ç«¯: `frontend-nuxt/` ç›®éŒ„
   - å¾Œç«¯: `backend/nodejs/` ç›®éŒ„

3. **å¯¦æ™‚æŸ¥çœ‹æ•ˆæœ**
   - å‰ç«¯: `http://localhost:3001`ï¼ˆè‡ªå‹•ç†±é‡è¼‰ï¼‰
   - å¾Œç«¯: ä¿®æ”¹å¾Œéœ€é‡å•Ÿæœå‹™å™¨

4. **æ¸¬è©¦åŠŸèƒ½**
   - ä½¿ç”¨ç€è¦½å™¨é–‹ç™¼è€…å·¥å…·
   - æŸ¥çœ‹ç¶²çµ¡è«‹æ±‚
   - æ¸¬è©¦ API èª¿ç”¨

### æ–°å¢åŠŸèƒ½

1. **å‰ç«¯çµ„ä»¶**
   ```bash
   # å‰µå»ºæ–°çµ„ä»¶
   frontend-nuxt/components/NewComponent.vue
   ```

2. **å¾Œç«¯ API**
   ```bash
   # å‰µå»ºæ–°è·¯ç”±
   backend/nodejs/routes/new.routes.js

   # è¨»å†Šåˆ° server.js
   app.use('/api/new', newRoutes)
   ```

3. **ç‹€æ…‹ç®¡ç†**
   ```bash
   # å‰µå»ºæ–° Store
   frontend-nuxt/stores/newStore.ts
   ```

---

## ğŸš€ éƒ¨ç½²æº–å‚™

### 1. ç’°å¢ƒé…ç½®

**ç”Ÿç”¢ç’°å¢ƒ .env**:
```env
NODE_ENV=production
NUXT_PUBLIC_API_BASE=https://your-domain.com/api
PORT=3000
```

### 2. æ§‹å»ºå‰ç«¯

```bash
cd frontend-nuxt
npm run build
npm run preview
```

### 3. å•Ÿå‹•å¾Œç«¯

```bash
cd backend/nodejs
node server.js
```

### 4. åå‘ä»£ç†ï¼ˆNginxï¼‰

```nginx
server {
    listen 80;
    server_name your-domain.com;

    # å‰ç«¯
    location / {
        proxy_pass http://localhost:3001;
    }

    # å¾Œç«¯ API
    location /api {
        proxy_pass http://localhost:3000;
    }
}
```

---

## ğŸŠ ç¸½çµ

**ç•¶å‰ç‹€æ…‹**:
- âœ… æ–°å‰ç«¯ï¼šVue 3 + Nuxt 3 æ¡†æ¶
- âœ… èˆŠå‰ç«¯ï¼šå·²å‚™ä»½åˆ° `frontend-old/`
- âœ… å¾Œç«¯ï¼šä¿æŒä¸è®Šï¼ŒExpress + Firestore
- âœ… é–‹ç™¼ç’°å¢ƒï¼šä¸€éµå•Ÿå‹•è…³æœ¬
- âœ… å®Œæ•´æ–‡æª”ï¼šæ‰€æœ‰åŠŸèƒ½èªªæ˜

**ä¸‹ä¸€æ­¥**:
1. é›™æ“Š `å•Ÿå‹•é–‹ç™¼ç’°å¢ƒ.bat`
2. è¨ªå• `http://localhost:3001`
3. é–‹å§‹æ¸¬è©¦å’Œé–‹ç™¼ï¼

---

**ç¥é–‹ç™¼é †åˆ©ï¼** ğŸ®âœ¨
