# Nuxt.js å°ˆæ¡ˆæ¶æ§‹æ–‡æª”

## ğŸ—ï¸ æ•´é«”æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ç€è¦½å™¨ï¼ˆç”¨æˆ¶ç«¯ï¼‰                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Nuxt.js å‰ç«¯æ‡‰ç”¨                             â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚  â”‚
â”‚  â”‚  â”‚   Pages    â”‚  â”‚ Components â”‚  â”‚   Assets   â”‚         â”‚  â”‚
â”‚  â”‚  â”‚            â”‚  â”‚            â”‚  â”‚            â”‚         â”‚  â”‚
â”‚  â”‚  â”‚ index.vue  â”‚  â”‚  Heart.vue â”‚  â”‚   CSS      â”‚         â”‚  â”‚
â”‚  â”‚  â”‚ admin.vue  â”‚  â”‚ Leaderboardâ”‚  â”‚   Images   â”‚         â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  â”‚
â”‚  â”‚         â”‚                â”‚                â”‚              â”‚  â”‚
â”‚  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚  â”‚
â”‚  â”‚                  â”‚                                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚        Composablesï¼ˆçµ„åˆå¼å‡½æ•¸ï¼‰                  â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  useAPI   â”‚  â”‚useHeartPhysicsâ”‚  â”‚ useAudio  â”‚ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚           â”‚  â”‚               â”‚  â”‚           â”‚ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ API èª¿ç”¨   â”‚  â”‚  Matter.js    â”‚  â”‚  éŸ³æ•ˆç®¡ç†  â”‚ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚                  â”‚                                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚        Pinia Storesï¼ˆç‹€æ…‹ç®¡ç†ï¼‰                   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   gameStore     â”‚  â”‚ leaderboardStore      â”‚ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚                 â”‚  â”‚                       â”‚ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ - playerId      â”‚  â”‚ - players[]           â”‚ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ - heartCount    â”‚  â”‚ - myRank              â”‚ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ - inMoonWorld   â”‚  â”‚ - autoRefresh         â”‚ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ - bossHealth    â”‚  â”‚ - loading/error       â”‚ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚ HTTP/HTTPS
                          â”‚ Fetch API
                          â”‚ JSON
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å¾Œç«¯ API ä¼ºæœå™¨                            â”‚
â”‚                 (Express.js on Node.js)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚            API Routesï¼ˆè·¯ç”±å±¤ï¼‰                        â”‚  â”‚
â”‚  â”‚  /api/leaderboard/        - æ’è¡Œæ¦œç«¯é»                â”‚  â”‚
â”‚  â”‚  /api/leaderboard/submit  - æäº¤åˆ†æ•¸                  â”‚  â”‚
â”‚  â”‚  /api/leaderboard/avatar  - ä¸Šå‚³å¤§é ­è²¼                â”‚  â”‚
â”‚  â”‚  /api/admin/*             - ç®¡ç†ç«¯é»                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                 â”‚                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚          Servicesï¼ˆæ¥­å‹™é‚è¼¯å±¤ï¼‰                        â”‚  â”‚
â”‚  â”‚  - leaderboard.service.js  (663è¡Œ)                    â”‚  â”‚
â”‚  â”‚  - åˆ†æ•¸è¨ˆç®—ã€æ’åé‚è¼¯ã€å¿«å–ç®¡ç†                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                 â”‚                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         Middlewareï¼ˆä¸­é–“ä»¶å±¤ï¼‰                         â”‚  â”‚
â”‚  â”‚  - CORS è™•ç†                                           â”‚  â”‚
â”‚  â”‚  - éŒ¯èª¤è™•ç†                                            â”‚  â”‚
â”‚  â”‚  - æª”æ¡ˆä¸Šå‚³ï¼ˆMulterï¼‰                                  â”‚  â”‚
â”‚  â”‚  - å¿«å–å±¤ï¼ˆMemory/Redisï¼‰                              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚ Firebase Admin SDK
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Firebase Firestoreï¼ˆé›²ç«¯ NoSQL è³‡æ–™åº«ï¼‰         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Collectionsï¼ˆé›†åˆï¼‰:                                 â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  ğŸ“ userTotals/          - ç©å®¶ç¸½åˆ†                   â”‚  â”‚
â”‚  â”‚     â””â”€ {playerId}                                    â”‚  â”‚
â”‚  â”‚        - username                                    â”‚  â”‚
â”‚  â”‚        - totalHearts                                 â”‚  â”‚
â”‚  â”‚        - updated_at                                  â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  ğŸ“ users/               - ç”¨æˆ¶è³‡æ–™                   â”‚  â”‚
â”‚  â”‚     â””â”€ {userId}                                      â”‚  â”‚
â”‚  â”‚        - avatar_url                                  â”‚  â”‚
â”‚  â”‚        - title                                       â”‚  â”‚
â”‚  â”‚        - created_at                                  â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  ğŸ“ scores/              - åˆ†æ•¸è¨˜éŒ„                   â”‚  â”‚
â”‚  â”‚     â””â”€ {scoreId}                                     â”‚  â”‚
â”‚  â”‚        - player_id                                   â”‚  â”‚
â”‚  â”‚        - score                                       â”‚  â”‚
â”‚  â”‚        - timestamp                                   â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  ğŸ“ metadata/            - çµ±è¨ˆå…ƒæ•¸æ“š                 â”‚  â”‚
â”‚  â”‚     â””â”€ stats                                         â”‚  â”‚
â”‚  â”‚        - totalPlayers                                â”‚  â”‚
â”‚  â”‚        - lastUpdated                                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚  é…é¡é™åˆ¶ï¼ˆå…è²»ç‰ˆï¼‰:                                         â”‚
â”‚  - è®€å–: 50,000 æ¬¡/å¤©                                       â”‚
â”‚  - å¯«å…¥: 20,000 æ¬¡/å¤©                                       â”‚
â”‚  - å„²å­˜: 1 GB                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¦ å‰ç«¯æ¨¡çµ„è¨­è¨ˆ

### 1. Pagesï¼ˆé é¢å±¤ï¼‰

```
pages/
â”œâ”€â”€ index.vue          # ä¸»éŠæˆ²é é¢
â”‚   â”œâ”€â”€ <HeartInteraction>
â”‚   â”œâ”€â”€ <Leaderboard>
â”‚   â”œâ”€â”€ <MoonWorld>
â”‚   â””â”€â”€ <BossBattle>
â”‚
â””â”€â”€ admin.vue          # ç®¡ç†å¾Œå°
    â”œâ”€â”€ <PlayerList>
    â”œâ”€â”€ <ScoreManager>
    â””â”€â”€ <AdminControls>
```

**è·è²¬**:
- è·¯ç”±ç®¡ç†
- çµ„ä»¶çµ„åˆ
- é é¢ç´šç‹€æ…‹

### 2. Componentsï¼ˆçµ„ä»¶å±¤ï¼‰

```
components/
â”œâ”€â”€ game/
â”‚   â”œâ”€â”€ HeartInteraction.vue    # æ„›å¿ƒäº’å‹•
â”‚   â”œâ”€â”€ HeartPhysics.vue         # ç‰©ç†æ•ˆæœ
â”‚   â”œâ”€â”€ MoonWorld.vue            # æœˆçƒä¸–ç•Œ
â”‚   â””â”€â”€ BossBattle.vue           # Boss æˆ°é¬¥
â”‚
â”œâ”€â”€ leaderboard/
â”‚   â”œâ”€â”€ Leaderboard.vue          # æ’è¡Œæ¦œä¸»çµ„ä»¶
â”‚   â”œâ”€â”€ PlayerCard.vue           # ç©å®¶å¡ç‰‡
â”‚   â”œâ”€â”€ TopThree.vue             # å‰ä¸‰åå±•ç¤º
â”‚   â””â”€â”€ LeaderboardControls.vue  # æ§åˆ¶æŒ‰éˆ•
â”‚
â”œâ”€â”€ ui/
â”‚   â”œâ”€â”€ Dialog.vue               # å°è©±æ¡†
â”‚   â”œâ”€â”€ Button.vue               # æŒ‰éˆ•
â”‚   â””â”€â”€ LoadingSpinner.vue       # è¼‰å…¥å‹•ç•«
â”‚
â””â”€â”€ admin/
    â”œâ”€â”€ PlayerList.vue           # ç©å®¶åˆ—è¡¨
    â””â”€â”€ ScoreManager.vue         # åˆ†æ•¸ç®¡ç†
```

**è¨­è¨ˆåŸå‰‡**:
- å–®ä¸€è·è²¬
- å¯é‡ç”¨
- Props å‚³éæ•¸æ“š
- Emit ç™¼é€äº‹ä»¶

### 3. Composablesï¼ˆçµ„åˆå¼å‡½æ•¸ï¼‰

```
composables/
â”œâ”€â”€ useAPI.ts              # API èª¿ç”¨
â”‚   â”œâ”€â”€ getLeaderboard()
â”‚   â”œâ”€â”€ submitScore()
â”‚   â”œâ”€â”€ updateUsername()
â”‚   â””â”€â”€ uploadAvatar()
â”‚
â”œâ”€â”€ useHeartPhysics.ts     # ç‰©ç†å¼•æ“
â”‚   â”œâ”€â”€ init()
â”‚   â”œâ”€â”€ addHeart()
â”‚   â””â”€â”€ cleanup()
â”‚
â”œâ”€â”€ useAudio.ts            # éŸ³æ•ˆç®¡ç†
â”‚   â”œâ”€â”€ playSound()
â”‚   â””â”€â”€ playMusic()
â”‚
â””â”€â”€ useTimeOfDay.ts        # æ™‚æ®µç³»çµ±
    â”œâ”€â”€ getCurrentPeriod()
    â””â”€â”€ getGreeting()
```

**ç‰¹é»**:
- é‚è¼¯å¾©ç”¨
- ç‹€æ…‹å…±äº«
- ç”Ÿå‘½é€±æœŸç®¡ç†

### 4. Storesï¼ˆç‹€æ…‹ç®¡ç†ï¼‰

```
stores/
â”œâ”€â”€ game.ts                # éŠæˆ²ç‹€æ…‹
â”‚   â”œâ”€â”€ State
â”‚   â”‚   â”œâ”€â”€ playerId
â”‚   â”‚   â”œâ”€â”€ heartCount
â”‚   â”‚   â”œâ”€â”€ inMoonWorld
â”‚   â”‚   â””â”€â”€ bossHealth
â”‚   â”‚
â”‚   â”œâ”€â”€ Getters
â”‚   â”‚   â”œâ”€â”€ displayName
â”‚   â”‚   â””â”€â”€ bossHealthPercent
â”‚   â”‚
â”‚   â””â”€â”€ Actions
â”‚       â”œâ”€â”€ clickHeart()
â”‚       â”œâ”€â”€ enterMoonWorld()
â”‚       â”œâ”€â”€ attackBoss()
â”‚       â””â”€â”€ saveToStorage()
â”‚
â””â”€â”€ leaderboard.ts         # æ’è¡Œæ¦œç‹€æ…‹
    â”œâ”€â”€ State
    â”‚   â”œâ”€â”€ players[]
    â”‚   â”œâ”€â”€ myRank
    â”‚   â”œâ”€â”€ loading
    â”‚   â””â”€â”€ autoRefresh
    â”‚
    â”œâ”€â”€ Getters
    â”‚   â”œâ”€â”€ topThreePlayers
    â”‚   â””â”€â”€ myRankText
    â”‚
    â””â”€â”€ Actions
        â”œâ”€â”€ fetchLeaderboard()
        â”œâ”€â”€ submitScore()
        â””â”€â”€ updateUsername()
```

**è·è²¬**:
- å…¨åŸŸç‹€æ…‹ç®¡ç†
- æ¥­å‹™é‚è¼¯å°è£
- æ•¸æ“šæŒä¹…åŒ–

## ğŸ”„ æ•¸æ“šæµå‘

### 1. æ„›å¿ƒé»æ“Šæµç¨‹

```
ç”¨æˆ¶é»æ“Š
    â”‚
    â–¼
HeartInteraction.vue
    â”‚ @click="handleHeartClick"
    â”‚
    â–¼
gameStore.clickHeart(1)
    â”‚
    â”œâ”€â–º heartCount++
    â”œâ”€â–º totalHearts++
    â””â”€â–º saveToStorage()
        â”‚
        â””â”€â–º localStorage
```

### 2. åˆ†æ•¸æäº¤æµç¨‹

```
ç”¨æˆ¶é»æ“Šã€Œæäº¤åˆ†æ•¸ã€
    â”‚
    â–¼
leaderboardStore.submitScore()
    â”‚
    â”œâ”€â–º æ¨‚è§€æ›´æ–° UI
    â”‚
    â–¼
useAPI().submitScore()
    â”‚
    â–¼
POST /api/leaderboard/submit
    â”‚
    â–¼
leaderboard.service.js
    â”‚
    â”œâ”€â–º é©—è­‰æ•¸æ“š
    â”œâ”€â–º Transaction æ›´æ–°
    â”‚
    â–¼
Firestore
    â”‚
    â”œâ”€â–º userTotals/{playerId}
    â””â”€â–º metadata/stats
        â”‚
        â–¼
    å›å‚³æˆåŠŸ
        â”‚
        â–¼
åˆ·æ–°æ’è¡Œæ¦œ
```

### 3. æ’è¡Œæ¦œåˆ·æ–°æµç¨‹

```
è‡ªå‹•åˆ·æ–° Timerï¼ˆæ¯ 5 ç§’ï¼‰
    â”‚
    â–¼
leaderboardStore.fetchLeaderboard()
    â”‚
    â–¼
useAPI().getLeaderboard()
    â”‚
    â–¼
GET /api/leaderboard?limit=100
    â”‚
    â–¼
å¿«å–æª¢æŸ¥
    â”‚
    â”œâ”€â–º å¿«å–å‘½ä¸­ â”€â–º è¿”å›å¿«å–æ•¸æ“š
    â”‚
    â””â”€â–º å¿«å–æœªå‘½ä¸­
        â”‚
        â–¼
    Firestore Query
        â”‚
        â”œâ”€â–º æŸ¥è©¢ userTotals
        â”œâ”€â–º æ’åº (score DESC, updated_at ASC)
        â””â”€â–º é™åˆ¶ 100 ç­†
            â”‚
            â–¼
        æ›´æ–°å¿«å–ï¼ˆTTL 60ç§’ï¼‰
            â”‚
            â–¼
        è¿”å›æ•¸æ“š
            â”‚
            â–¼
    æ›´æ–° Store
        â”‚
        â””â”€â–º UI é‡æ–°æ¸²æŸ“
```

## ğŸ¨ çµ„ä»¶é€šè¨Šæ¨¡å¼

### 1. Props Down, Events Up

```vue
<!-- Parent.vue -->
<template>
  <Child
    :count="heartCount"
    @click="handleClick"
  />
</template>

<!-- Child.vue -->
<script setup>
defineProps<{ count: number }>()
const emit = defineEmits<{ click: [] }>()
</script>
```

### 2. Store å…±äº«ç‹€æ…‹

```vue
<!-- ComponentA.vue -->
<script setup>
const gameStore = useGameStore()
gameStore.clickHeart(1)
</script>

<!-- ComponentB.vue -->
<script setup>
const gameStore = useGameStore()
// è‡ªå‹•éŸ¿æ‡‰ gameStore.heartCount è®ŠåŒ–
</script>
```

### 3. Provide/Injectï¼ˆè·¨å±¤ç´šï¼‰

```vue
<!-- App.vue -->
<script setup>
provide('theme', 'dark')
</script>

<!-- DeepChild.vue -->
<script setup>
const theme = inject('theme')
</script>
```

## ğŸ”Œ API è¨­è¨ˆæ¨¡å¼

### RESTful API ç«¯é»

| æ–¹æ³• | ç«¯é» | åŠŸèƒ½ | è«‹æ±‚é«” | å›æ‡‰ |
|------|------|------|--------|------|
| GET | `/api/leaderboard` | ç²å–æ’è¡Œæ¦œ | - | `{ players[], total }` |
| POST | `/api/leaderboard/submit` | æäº¤åˆ†æ•¸ | `{ player_id, score }` | `{ success, player }` |
| PUT | `/api/leaderboard/username` | æ›´æ–°åç¨± | `{ player_id, username }` | `{ success, player }` |
| POST | `/api/leaderboard/avatar` | ä¸Šå‚³é ­è²¼ | FormData | `{ success, avatar_url }` |
| GET | `/api/leaderboard/my-rank/:id` | å€‹äººæ’å | - | `{ rank, player }` |

### éŒ¯èª¤è™•ç†

```typescript
try {
  const data = await api.submitScore(...)
  // æˆåŠŸè™•ç†
} catch (error) {
  if (error.status === 400) {
    // å®¢æˆ¶ç«¯éŒ¯èª¤
  } else if (error.status === 500) {
    // ä¼ºæœå™¨éŒ¯èª¤
  }
  // é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯
}
```

## ğŸ“Š æ€§èƒ½å„ªåŒ–ç­–ç•¥

### 1. å‰ç«¯å„ªåŒ–

- âœ… **è™›æ“¬æ»¾å‹•**: æ’è¡Œæ¦œåªæ¸²æŸ“å¯è¦‹é …ç›®
- âœ… **çµ„ä»¶æ‡¶åŠ è¼‰**: æŒ‰éœ€è¼‰å…¥å¤§çµ„ä»¶
- âœ… **åœ–ç‰‡å„ªåŒ–**: WebP æ ¼å¼ + æ‡¶åŠ è¼‰
- âœ… **ä»£ç¢¼åˆ†å‰²**: Nuxt è‡ªå‹•åˆ†å‰²è·¯ç”±
- âœ… **ç‹€æ…‹æŒä¹…åŒ–**: LocalStorage é¿å…é‡è¤‡è«‹æ±‚

### 2. å¾Œç«¯å„ªåŒ–

- âœ… **å¤šå±¤å¿«å–**: Memory + Redis
- âœ… **æ‰¹æ¬¡æ“ä½œ**: Transaction æ¸›å°‘è®€å¯«
- âœ… **ç´¢å¼•å„ªåŒ–**: Firestore è¤‡åˆç´¢å¼•
- âœ… **è¼ªè©¢å„ªåŒ–**: 2ç§’ â†’ 5ç§’ï¼ˆç¯€çœ 60% è«‹æ±‚ï¼‰

### 3. ç¶²è·¯å„ªåŒ–

- âœ… **GZIP å£“ç¸®**: æ¸›å°‘å‚³è¼¸é«”ç©
- âœ… **HTTP/2**: å¤šè·¯å¾©ç”¨
- âœ… **CDN**: Vercel Edge Network
- âœ… **é å–**: é—œéµè³‡æºé è¼‰

## ğŸ” å®‰å…¨æ€§è€ƒé‡

### å‰ç«¯

- âœ… XSS é˜²è­·: Vue è‡ªå‹•è½‰ç¾©
- âœ… CSRF: SameSite Cookie
- â³ è¼¸å…¥é©—è­‰: å¾…åŠ å¼·

### å¾Œç«¯

- âœ… CORS é…ç½®
- âœ… Rate Limitingï¼ˆFirebase é…é¡ï¼‰
- â³ API Key èªè­‰ï¼ˆå¾…æ·»åŠ ï¼‰
- â³ ç®¡ç†ç«¯é»ä¿è­·ï¼ˆå¾…æ·»åŠ ï¼‰

## ğŸ“± éŸ¿æ‡‰å¼è¨­è¨ˆ

```
Desktop (> 1024px)
â”œâ”€â”€ å®Œæ•´æ’è¡Œæ¦œå´é‚Šæ¬„
â”œâ”€â”€ å¤§å‹æ„›å¿ƒäº’å‹•å€
â””â”€â”€ Boss æˆ°é¬¥å…¨å±

Tablet (768px - 1024px)
â”œâ”€â”€ å¯æŠ˜ç–Šæ’è¡Œæ¦œ
â”œâ”€â”€ ä¸­ç­‰æ„›å¿ƒäº’å‹•å€
â””â”€â”€ Boss æˆ°é¬¥é©é…

Mobile (< 768px)
â”œâ”€â”€ åº•éƒ¨æ’è¡Œæ¦œ
â”œâ”€â”€ å–®æ‰‹æ“ä½œå„ªåŒ–
â””â”€â”€ Boss æˆ°é¬¥ç°¡åŒ–
```

## ğŸ¯ ä¸‹ä¸€æ­¥æ¶æ§‹æ”¹é€²

### çŸ­æœŸ
- [ ] æ·»åŠ å–®å…ƒæ¸¬è©¦ï¼ˆVitestï¼‰
- [ ] E2E æ¸¬è©¦ï¼ˆPlaywrightï¼‰
- [ ] Error Boundary

### ä¸­æœŸ
- [ ] WebSocket å³æ™‚æ›´æ–°
- [ ] PWA æ”¯æ´
- [ ] é›¢ç·šæ¨¡å¼

### é•·æœŸ
- [ ] SSR/SSG æ··åˆæ¸²æŸ“
- [ ] å¾®å‰ç«¯æ¶æ§‹
- [ ] GraphQL API

---

**ç‰ˆæœ¬**: 1.0
**æ›´æ–°æ—¥æœŸ**: 2025-11-02
**ç¶­è­·è€…**: é–‹ç™¼åœ˜éšŠ
